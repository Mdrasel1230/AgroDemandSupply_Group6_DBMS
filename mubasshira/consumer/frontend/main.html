<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Products Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    body {
      background-color: #f1f5f9;
    }

    .navbar {
      background: linear-gradient(90deg, #007bff, #0056b3);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .navbar-brand {
      color: #ffffff !important;
      font-size: 1.8rem;
      font-weight: bold;
    }

    .category-list {
      cursor: pointer;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .category-list.active,
    .category-list:hover {
      background-color: #007bff;
      color: #ffffff;
      font-weight: bold;
    }

    .product-card {
      transition: transform 0.3s, box-shadow 0.3s;
      margin-bottom: 20px;
    }

    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
    }

    #cartSidebar {
      position: fixed;
      top: 60px;
      right: 0;
      width: 320px;
      height: 100%;
      background-color: #ffffff;
      box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
      padding: 15px;
      overflow-y: auto;
      transition: transform 0.3s ease;
      transform: translateX(100%);
      z-index: 1050;
    }

    #cartSidebar.show {
      transform: translateX(0);
    }

    .cart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-bottom: 10px;
      border-bottom: 1px solid #ddd;
    }

    .cart-item img {
      width: 50px;
      height: 50px;
      object-fit: cover;
      border-radius: 5px;
    }

    footer {
      margin-top: 50px;
      padding: 15px;
      text-align: center;
      background: #007bff;
      color: #ffffff;
    }

    .notification {
      position: fixed;
      top: 10px;
      right: 10px;
      background-color: #28a745;
      color: white;
      padding: 10px;
      border-radius: 5px;
      display: none;
      z-index: 1050;
    }

    .rating {
      color: #f39c12;
    }
  </style>
</head>

<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg">
    <div class="container">
      <a class="navbar-brand" href="#"><i class="fas fa-seedling"></i> Agro Dashboard</a>
      <button class="btn btn-light" onclick="toggleCart()">View Cart</button>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="container my-4">
    <div class="row">
      <div class="col-md-3">
        <h3>Categories</h3>
        <ul class="list-group">
          <li class="list-group-item category-list active" onclick="filterProducts('')">All Products</li>
          <li class="list-group-item category-list" onclick="filterProducts('Grains')">Grains</li>
          <li class="list-group-item category-list" onclick="filterProducts('Fruits')">Fruits</li>
          <li class="list-group-item category-list" onclick="filterProducts('Vegetables')">Vegetables</li>
        </ul>
      </div>
      <div class="col-md-9">
        <div class="row" id="productList"></div>
      </div>
    </div>
  </div>

  <!-- Cart Sidebar -->
  <div id="cartSidebar">
    <div class="cart-header">
      <h4>Your Cart</h4>
      <button class="btn-close" onclick="toggleCart()"></button>
    </div>
    <div id="cartContent"></div>
    <h5 class="mt-3">Total: ৳<span id="totalPrice">0</span></h5>
    <button class="btn btn-warning w-100 mt-3" onclick="clearCart()">Clear Cart</button>
    <button class="btn btn-success w-100 mt-3" onclick="confirmOrder()">Confirm Order</button>
  </div>

  <div class="notification" id="notification">Product added to cart!</div>

  <footer>
    <p>© 2024 Better Agriculture. All Rights Reserved.</p>
  </footer>

  <script>
    const products = [
      { id: 1, name: "Wheat", price: 30, category: "Grains", rating: 4.5 },
      { id: 2, name: "Rice", price: 25, category: "Grains", rating: 4.0 },
      { id: 3, name: "Apple", price: 50, category: "Fruits", rating: 4.8 },
      { id: 4, name: "Carrot", price: 20, category: "Vegetables", rating: 4.6 },
    ];
    const cart = [];

    const displayProducts = (category) => {
      const filteredProducts = category
        ? products.filter((product) => product.category === category)
        : products;

      const productList = document.getElementById("productList");
      productList.innerHTML = "";

      filteredProducts.forEach((product) => {
        const productCard = `
          <div class="col-md-4">
            <div class="card product-card">
              <div class="card-body">
                <h5>${product.name}</h5>
                <p>৳${product.price}</p>
                <div class="rating">${"★".repeat(product.rating)}</div>
                <button class="btn btn-primary btn-sm" onclick="addToCart(${product.id})">Add to Cart</button>
              </div>
            </div>
          </div>
        `;
        productList.innerHTML += productCard;
      });
    };

    const addToCart = (id) => {
      const product = products.find((p) => p.id === id);
      cart.push(product);
      updateCartUI();
      showNotification("Product added to cart!");
    };

    const toggleCart = () => {
      document.getElementById("cartSidebar").classList.toggle("show");
    };

    const updateCartUI = () => {
      const cartContent = document.getElementById("cartContent");
      cartContent.innerHTML = "";
      let totalPrice = 0;

      cart.forEach((item, index) => {
        cartContent.innerHTML += `
          <div class="cart-item d-flex justify-content-between align-items-center">
            <span>${item.name}</span>
            <span>৳${item.price}</span>
            <button class="btn btn-sm btn-danger" onclick="removeFromCart(${index})">Remove</button>
          </div>
        `;
        totalPrice += item.price;
      });

      document.getElementById("totalPrice").innerText = totalPrice;
    };

    const removeFromCart = (index) => {
      cart.splice(index, 1);
      updateCartUI();
    };

    const clearCart = () => {
      cart.length = 0;
      updateCartUI();
    };

    const confirmOrder = () => {
      localStorage.setItem("orderDetails", JSON.stringify(cart));
      location.href = "order-confirmation.html";
    };

    const filterProducts = (category) => {
      document.querySelectorAll(".category-list").forEach((el) => el.classList.remove("active"));
      event.target.classList.add("active");
      displayProducts(category);
    };

    const showNotification = (message) => {
      const notification = document.getElementById("notification");
      notification.innerText = message;
      notification.style.display = "block";
      setTimeout(() => (notification.style.display = "none"), 3000);
    };

    window.onload = () => displayProducts("");
  </script>
</body>
</html>
